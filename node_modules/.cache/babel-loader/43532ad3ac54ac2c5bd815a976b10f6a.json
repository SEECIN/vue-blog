{"remainingRequest":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\thread-loader\\dist\\cjs.js!D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\桌面\\页面练习\\vue-blog\\vue-blog\\src\\api\\http.js","dependencies":[{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\src\\api\\http.js","mtime":1631517427300},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9Ob3RpZmljYXRpb24yIGZyb20gImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL25vdGlmaWNhdGlvbi5jc3MiOwppbXBvcnQgImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2Jhc2UuY3NzIjsKaW1wb3J0IF9Ob3RpZmljYXRpb24gZnJvbSAiZWxlbWVudC11aS9saWIvbm90aWZpY2F0aW9uIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1x1Njg0Q1x1OTc2Mi9cdTk4NzVcdTk3NjJcdTdFQzNcdTRFNjAvdnVlLWJsb2cvdnVlLWJsb2cvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IGluc3RhbmNlIGZyb20gJ0AvYXBpL2NvbW1vbic7CmltcG9ydCBzdG9yZSBmcm9tICJzdG9yZSI7CmltcG9ydCBBUElfTElTVCBmcm9tICdAL2NvbmZpZy9hcGkuY29uZmlnJzsKaW1wb3J0IGVuY3J5cHQgZnJvbSAnQC91dGlsL2VuY3J5cHQnOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIdHRwKF94KSB7CiAgcmV0dXJuIF9IdHRwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9IdHRwKCkgewogIF9IdHRwID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKF9yZWYpIHsKICAgIHZhciB0eXBlLCBkYXRhLCBwYXJhbXMsIF9BUElfTElTVCR0eXBlLCB1cmwsIG1ldGhvZCwgX0FQSV9MSVNUJHR5cGUkcnNhS2V5LCByc2FLZXksIF9BUElfTElTVCR0eXBlJHNldFRvaywgc2V0VG9rZW4sIF9BUElfTElTVCR0eXBlJG5vTWVzcywgbm9NZXNzYWdlLCBfQVBJX0xJU1QkdHlwZSRyZXN0LCByZXN0LCByZXN0U3ltYm9sLCByZXN1bHQsIHRva2VuLCB1aWQsIG1lc3NhZ2U7CgogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB0eXBlID0gX3JlZi50eXBlLCBkYXRhID0gX3JlZi5kYXRhLCBwYXJhbXMgPSBfcmVmLnBhcmFtczsKCiAgICAgICAgICAgIGlmICh0eXBlIGluIEFQSV9MSVNUKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQVBJ6K+35rGC6ZSZ6K+vJyk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBfQVBJX0xJU1QkdHlwZSA9IEFQSV9MSVNUW3R5cGVdLCB1cmwgPSBfQVBJX0xJU1QkdHlwZS51cmwsIG1ldGhvZCA9IF9BUElfTElTVCR0eXBlLm1ldGhvZCwgX0FQSV9MSVNUJHR5cGUkcnNhS2V5ID0gX0FQSV9MSVNUJHR5cGUucnNhS2V5LCByc2FLZXkgPSBfQVBJX0xJU1QkdHlwZSRyc2FLZXkgPT09IHZvaWQgMCA/IGZhbHNlIDogX0FQSV9MSVNUJHR5cGUkcnNhS2V5LCBfQVBJX0xJU1QkdHlwZSRzZXRUb2sgPSBfQVBJX0xJU1QkdHlwZS5zZXRUb2tlbiwgc2V0VG9rZW4gPSBfQVBJX0xJU1QkdHlwZSRzZXRUb2sgPT09IHZvaWQgMCA/IGZhbHNlIDogX0FQSV9MSVNUJHR5cGUkc2V0VG9rLCBfQVBJX0xJU1QkdHlwZSRub01lc3MgPSBfQVBJX0xJU1QkdHlwZS5ub01lc3NhZ2UsIG5vTWVzc2FnZSA9IF9BUElfTElTVCR0eXBlJG5vTWVzcyA9PT0gdm9pZCAwID8gZmFsc2UgOiBfQVBJX0xJU1QkdHlwZSRub01lc3MsIF9BUElfTElTVCR0eXBlJHJlc3QgPSBfQVBJX0xJU1QkdHlwZS5yZXN0LCByZXN0ID0gX0FQSV9MSVNUJHR5cGUkcmVzdCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfQVBJX0xJU1QkdHlwZSRyZXN0OwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDsKICAgICAgICAgICAgbWV0aG9kID0gbWV0aG9kLnRvTG93ZXJDYXNlKCk7CgogICAgICAgICAgICBpZiAoIShyc2FLZXkgJiYgZGF0YVtyc2FLZXldKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgIHJldHVybiBlbmNyeXB0KGRhdGFbcnNhS2V5XSk7CgogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBkYXRhW3JzYUtleV0gPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGlmIChyZXN0KSB7CiAgICAgICAgICAgICAgLy8gOmlkICwgOmNsYXNzaWZ5ICAuLi4uCiAgICAgICAgICAgICAgcmVzdFN5bWJvbCA9IHVybC5tYXRjaCgvOiguKikkLylbMV07CiAgICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoLzooLiopJC8sIGRhdGFbcmVzdFN5bWJvbF0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBkYXRhID0gbWV0aG9kID09PSAnZ2V0JyA/IHsKICAgICAgICAgICAgICBwYXJhbXM6IGRhdGEKICAgICAgICAgICAgfSA6IGRhdGE7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlW21ldGhvZF0odXJsLCBkYXRhLCB7CiAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGlmIChzZXRUb2tlbikgewogICAgICAgICAgICAgIHRva2VuID0gcmVzdWx0LnRva2VuOwogICAgICAgICAgICAgIHVpZCA9IHJlc3VsdC51c2VySWQ7CiAgICAgICAgICAgICAgc3RvcmUuc2V0KCd1aWQnLCB1aWQpOyAvL+acrOWcsOWtmOWCqHRva2VuCgogICAgICAgICAgICAgIHN0b3JlLnNldChwcm9jZXNzLmVudi5WVUVfQVBQX1RPS0VOX05BTUUsIHRva2VuKTsKICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbG9naW4nKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTk7CiAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oNCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgIGlmIChfY29udGV4dC50MC5yZXNwb25zZSkgewogICAgICAgICAgICAgIG1lc3NhZ2UgPSBfY29udGV4dC50MC5yZXNwb25zZS5kYXRhLm1lc3NhZ2U7CgogICAgICAgICAgICAgIGlmICghbm9NZXNzYWdlKSB7CiAgICAgICAgICAgICAgICBfTm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICfplJnor68nLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KF9jb250ZXh0LnQwKSk7CgogICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzQsIDE5XV0pOwogIH0pKTsKICByZXR1cm4gX0h0dHAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQ=="},{"version":3,"sources":["D:/桌面/页面练习/vue-blog/vue-blog/src/api/http.js"],"names":["instance","store","API_LIST","encrypt","Http","type","data","params","Error","url","method","rsaKey","setToken","noMessage","rest","toLowerCase","restSymbol","match","replace","result","token","uid","userId","set","process","env","VUE_APP_TOKEN_NAME","$store","dispatch","console","log","response","message","error","title","Promise","reject"],"mappings":";;;;;;;;;AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,OAAP,MAAqB,gBAArB;AAKA,wBAA8BC,IAA9B;AAAA;AAAA;;;kEAAe;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAsBC,YAAAA,IAAtB,QAAsBA,IAAtB,EAA4BC,IAA5B,QAA4BA,IAA5B,EAAkCC,MAAlC,QAAkCA,MAAlC;;AAAA,gBACPF,IAAI,IAAIH,QADD;AAAA;AAAA;AAAA;;AAAA,kBAEL,IAAIM,KAAJ,CAAU,SAAV,CAFK;;AAAA;AAAA,6BAI6EN,QAAQ,CAACG,IAAD,CAJrF,EAIPI,GAJO,kBAIPA,GAJO,EAIFC,MAJE,kBAIFA,MAJE,yCAIOC,MAJP,EAIOA,MAJP,sCAIgB,KAJhB,iEAIuBC,QAJvB,EAIuBA,QAJvB,sCAIkC,KAJlC,iEAIyCC,SAJzC,EAIyCA,SAJzC,sCAIqD,KAJrD,+DAI4DC,IAJ5D,EAI4DA,IAJ5D,oCAImE,KAJnE;AAAA;AAMXJ,YAAAA,MAAM,GAAGA,MAAM,CAACK,WAAP,EAAT;;AANW,kBAOPJ,MAAM,IAAIL,IAAI,CAACK,MAAD,CAPP;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAQYR,OAAO,CAACG,IAAI,CAACK,MAAD,CAAL,CARnB;;AAAA;AAQTL,YAAAA,IAAI,CAACK,MAAD,CARK;;AAAA;AAUX,gBAAIG,IAAJ,EAAU;AACR;AACIE,cAAAA,UAFI,GAESP,GAAG,CAACQ,KAAJ,CAAU,QAAV,EAAoB,CAApB,CAFT;AAGRR,cAAAA,GAAG,GAAGA,GAAG,CAACS,OAAJ,CAAY,QAAZ,EAAsBZ,IAAI,CAACU,UAAD,CAA1B,CAAN;AACD;;AACDV,YAAAA,IAAI,GAAGI,MAAM,KAAK,KAAX,GAAmB;AAAEH,cAAAA,MAAM,EAAED;AAAV,aAAnB,GAAsCA,IAA7C;AAfW;AAAA,mBAgBQN,QAAQ,CAACU,MAAD,CAAR,CAAiBD,GAAjB,EAAsBH,IAAtB,EAA4B;AAAEC,cAAAA,MAAM,EAANA;AAAF,aAA5B,CAhBR;;AAAA;AAgBPY,YAAAA,MAhBO;;AAiBX,gBAAIP,QAAJ,EAAc;AACRQ,cAAAA,KADQ,GACAD,MAAM,CAACC,KADP;AAERC,cAAAA,GAFQ,GAEFF,MAAM,CAACG,MAFL;AAGZrB,cAAAA,KAAK,CAACsB,GAAN,CAAU,KAAV,EAAiBF,GAAjB,EAHY,CAIZ;;AACApB,cAAAA,KAAK,CAACsB,GAAN,CAAUC,OAAO,CAACC,GAAR,CAAYC,kBAAtB,EAA0CN,KAA1C;AACA,mBAAKO,MAAL,CAAYC,QAAZ,CAAqB,OAArB;AACD;;AAxBU,6CAyBJT,MAzBI;;AAAA;AAAA;AAAA;AA2BXU,YAAAA,OAAO,CAACC,GAAR;;AACA,gBAAI,YAAMC,QAAV,EAAoB;AACdC,cAAAA,OADc,GACJ,YAAMD,QAAN,CAAezB,IAAf,CAAoB0B,OADhB;;AAElB,kBAAI,CAACnB,SAAL,EAAgB;AACd,8BAAaoB,KAAb,CAAmB;AACjBC,kBAAAA,KAAK,EAAE,IADU;AAEjBF,kBAAAA,OAAO,EAAPA;AAFiB,iBAAnB;AAID;AACF;;AApCU,6CAqCJG,OAAO,CAACC,MAAR,aArCI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import instance from '@/api/common'\r\nimport store from \"store\"\r\nimport API_LIST from '@/config/api.config'\r\nimport encrypt  from '@/util/encrypt'\r\n\r\nimport { Notification } from 'element-ui'\r\n\r\n\r\nexport default async function Http({ type, data, params }) {\r\n  if (!(type in API_LIST)) {\r\n    throw new Error('API请求错误')\r\n  }\r\n  let { url, method,  rsaKey = false, setToken = false, noMessage = false, rest = false } = API_LIST[type]\r\n  try {\r\n    method = method.toLowerCase()\r\n    if (rsaKey && data[rsaKey]) {\r\n      data[rsaKey] = await encrypt(data[rsaKey])\r\n    }\r\n    if (rest) {\r\n      // :id , :classify  ....\r\n      let restSymbol = url.match(/:(.*)$/)[1]\r\n      url = url.replace(/:(.*)$/, data[restSymbol])\r\n    }\r\n    data = method === 'get' ? { params: data } : data\r\n    let result = await instance[method](url, data, { params })\r\n    if (setToken) {\r\n      let token = result.token;\r\n      let uid = result.userId\r\n      store.set('uid', uid)\r\n      //本地存储token\r\n      store.set(process.env.VUE_APP_TOKEN_NAME, token)\r\n      this.$store.dispatch('login')\r\n    }\r\n    return result\r\n  } catch (error) {\r\n    console.log(error);\r\n    if (error.response) {\r\n      let message = error.response.data.message\r\n      if (!noMessage) {\r\n        Notification.error({\r\n          title: '错误',\r\n          message\r\n        })\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n}"]}]}