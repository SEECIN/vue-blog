{"remainingRequest":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\桌面\\页面练习\\vue-blog\\vue-blog\\src\\util\\encrypt.js","dependencies":[{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\src\\util\\encrypt.js","mtime":1628652316172},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1x1Njg0Q1x1OTc2Mi9cdTk4NzVcdTk3NjJcdTdFQzNcdTRFNjAvdnVlLWJsb2cvdnVlLWJsb2cvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgc3RvcmUgZnJvbSAnc3RvcmUnOwppbXBvcnQgYmFzZSBmcm9tICdAL2NvbmZpZy9iYXNlLmNvbmZpZyc7CmltcG9ydCBKU0VuY3J5cHQgZnJvbSAnanNlbmNyeXB0JzsKaW1wb3J0IGluc3RhbmNlIGZyb20gJ0AvYXBpL2NvbW1vbic7CnZhciBQVUJLRVlfTkFNRSA9IGJhc2UuUFVCS0VZX05BTUU7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGVuY3J5cHQoX3gpIHsKICByZXR1cm4gX2VuY3J5cHQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2VuY3J5cHQoKSB7CiAgX2VuY3J5cHQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodmFsdWUpIHsKICAgIHZhciBrZXksIHJlc3VsdCwgX2VuY3J5cHQyOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAga2V5ID0gc3RvcmUuZ2V0KFBVQktFWV9OQU1FKTsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CgogICAgICAgICAgICBpZiAoISgha2V5IHx8IGtleSA9PT0gJ3VuZGVmaW5lZCcpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLmdldCgnL2tleXMnKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGtleSA9IHJlc3VsdC5wdWJLZXk7CiAgICAgICAgICAgIGtleSA9IGtleS5yZXBsYWNlKC9cLiArL2csICcnKTsKICAgICAgICAgICAga2V5ID0ga2V5LnJlcGxhY2UoL1tcclxuXS9nLCAnJyk7CiAgICAgICAgICAgIHN0b3JlLnNldChQVUJLRVlfTkFNRSwga2V5KTsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBfZW5jcnlwdDIgPSBuZXcgSlNFbmNyeXB0KCk7CgogICAgICAgICAgICBfZW5jcnlwdDIuc2V0UHVibGljS2V5KGtleSk7CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfZW5jcnlwdDIuZW5jcnlwdCh2YWx1ZSkpOwoKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNTsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQudDApOwoKICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSwgbnVsbCwgW1sxLCAxNV1dKTsKICB9KSk7CiAgcmV0dXJuIF9lbmNyeXB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"sources":["D:/桌面/页面练习/vue-blog/vue-blog/src/util/encrypt.js"],"names":["store","base","JSEncrypt","instance","PUBKEY_NAME","encrypt","value","key","get","result","pubKey","replace","set","setPublicKey","console","log"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAOC,QAAP,MAAqB,cAArB;AAEA,IAAOC,WAAP,GAAsBH,IAAtB,CAAOG,WAAP;AACA,wBACiBC,OADjB;AAAA;AAAA;;;qEACE,iBAAuBC,KAAvB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACMC,YAAAA,GADN,GACYP,KAAK,CAACQ,GAAN,CAAUJ,WAAV,CADZ;AAAA;;AAAA,kBAGQ,CAACG,GAAD,IAAQA,GAAG,KAAK,WAHxB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAIyBJ,QAAQ,CAACK,GAAT,CAAa,OAAb,CAJzB;;AAAA;AAIUC,YAAAA,MAJV;AAKMF,YAAAA,GAAG,GAAGE,MAAM,CAACC,MAAb;AACAH,YAAAA,GAAG,GAAGA,GAAG,CAACI,OAAJ,CAAY,OAAZ,EAAqB,EAArB,CAAN;AACAJ,YAAAA,GAAG,GAAGA,GAAG,CAACI,OAAJ,CAAY,SAAZ,EAAuB,EAAvB,CAAN;AACAX,YAAAA,KAAK,CAACY,GAAN,CAAUR,WAAV,EAAuBG,GAAvB;;AARN;AAUQF,YAAAA,SAVR,GAUkB,IAAIH,SAAJ,EAVlB;;AAWIG,YAAAA,SAAO,CAACQ,YAAR,CAAqBN,GAArB;;AAXJ,6CAYWF,SAAO,CAACA,OAAR,CAAgBC,KAAhB,CAZX;;AAAA;AAAA;AAAA;AAcIQ,YAAAA,OAAO,CAACC,GAAR;;AAdJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import store from 'store'\r\nimport base from '@/config/base.config'\r\nimport JSEncrypt from 'jsencrypt'\r\nimport instance from '@/api/common'\r\n\r\nconst {PUBKEY_NAME} = base\r\nexport default \r\n  async function encrypt(value) {\r\n    let key = store.get(PUBKEY_NAME)\r\n    try {\r\n      if (!key || key === 'undefined') {\r\n        let result = await instance.get('/keys')\r\n        key = result.pubKey\r\n        key = key.replace(/\\. +/g, '')\r\n        key = key.replace(/[\\r\\n]/g, '')\r\n        store.set(PUBKEY_NAME, key)\r\n      }\r\n      let encrypt = new JSEncrypt()\r\n      encrypt.setPublicKey(key)\r\n      return encrypt.encrypt(value)\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n"]}]}