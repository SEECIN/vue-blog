{"remainingRequest":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\桌面\\页面练习\\vue-blog\\vue-blog\\src\\api\\http.js","dependencies":[{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\src\\api\\http.js","mtime":1632490558968},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9Ob3RpZmljYXRpb24yIGZyb20gImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL25vdGlmaWNhdGlvbi5jc3MiOwppbXBvcnQgImVsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2Jhc2UuY3NzIjsKaW1wb3J0IF9Ob3RpZmljYXRpb24gZnJvbSAiZWxlbWVudC11aS9saWIvbm90aWZpY2F0aW9uIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1x1Njg0Q1x1OTc2Mi9cdTk4NzVcdTk3NjJcdTdFQzNcdTRFNjAvdnVlLWJsb2cvdnVlLWJsb2cvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IGluc3RhbmNlIGZyb20gJ0AvYXBpL2NvbW1vbic7CmltcG9ydCBzdG9yZSBmcm9tICJzdG9yZSI7CmltcG9ydCBBUElfTElTVCBmcm9tICdAL2NvbmZpZy9hcGkuY29uZmlnJzsKaW1wb3J0IGVuY3J5cHQgZnJvbSAnQC91dGlsL2VuY3J5cHQnOwppbXBvcnQgeyBUb2FzdCB9IGZyb20gJ3ZhbnQnOwppbXBvcnQgX2lzTW9iaWxlIGZyb20gJ0AvdXRpbC9pc01vYmlsZSc7CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEh0dHAoX3gpIHsKICByZXR1cm4gX0h0dHAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX0h0dHAoKSB7CiAgX0h0dHAgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX3JlZikgewogICAgdmFyIHR5cGUsIGRhdGEsIHBhcmFtcywgX0FQSV9MSVNUJHR5cGUsIHVybCwgbWV0aG9kLCBfQVBJX0xJU1QkdHlwZSRyc2FLZXksIHJzYUtleSwgX0FQSV9MSVNUJHR5cGUkc2V0VG9rLCBzZXRUb2tlbiwgX0FQSV9MSVNUJHR5cGUkbm9NZXNzLCBub01lc3NhZ2UsIF9BUElfTElTVCR0eXBlJHJlc3QsIHJlc3QsIHJlc3RTeW1ib2wsIHJlc3VsdCwgdG9rZW4sIHVpZCwgbWVzc2FnZTsKCiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHR5cGUgPSBfcmVmLnR5cGUsIGRhdGEgPSBfcmVmLmRhdGEsIHBhcmFtcyA9IF9yZWYucGFyYW1zOwoKICAgICAgICAgICAgaWYgKHR5cGUgaW4gQVBJX0xJU1QpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUEnor7fmsYLplJnor68nKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIF9BUElfTElTVCR0eXBlID0gQVBJX0xJU1RbdHlwZV0sIHVybCA9IF9BUElfTElTVCR0eXBlLnVybCwgbWV0aG9kID0gX0FQSV9MSVNUJHR5cGUubWV0aG9kLCBfQVBJX0xJU1QkdHlwZSRyc2FLZXkgPSBfQVBJX0xJU1QkdHlwZS5yc2FLZXksIHJzYUtleSA9IF9BUElfTElTVCR0eXBlJHJzYUtleSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfQVBJX0xJU1QkdHlwZSRyc2FLZXksIF9BUElfTElTVCR0eXBlJHNldFRvayA9IF9BUElfTElTVCR0eXBlLnNldFRva2VuLCBzZXRUb2tlbiA9IF9BUElfTElTVCR0eXBlJHNldFRvayA9PT0gdm9pZCAwID8gZmFsc2UgOiBfQVBJX0xJU1QkdHlwZSRzZXRUb2ssIF9BUElfTElTVCR0eXBlJG5vTWVzcyA9IF9BUElfTElTVCR0eXBlLm5vTWVzc2FnZSwgbm9NZXNzYWdlID0gX0FQSV9MSVNUJHR5cGUkbm9NZXNzID09PSB2b2lkIDAgPyBmYWxzZSA6IF9BUElfTElTVCR0eXBlJG5vTWVzcywgX0FQSV9MSVNUJHR5cGUkcmVzdCA9IF9BUElfTElTVCR0eXBlLnJlc3QsIHJlc3QgPSBfQVBJX0xJU1QkdHlwZSRyZXN0ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9BUElfTElTVCR0eXBlJHJlc3Q7CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA0OwogICAgICAgICAgICBtZXRob2QgPSBtZXRob2QudG9Mb3dlckNhc2UoKTsKCiAgICAgICAgICAgIGlmICghKHJzYUtleSAmJiBkYXRhW3JzYUtleV0pKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgcmV0dXJuIGVuY3J5cHQoZGF0YVtyc2FLZXldKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIGRhdGFbcnNhS2V5XSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgaWYgKHJlc3QpIHsKICAgICAgICAgICAgICAvLyA6aWQgLCA6Y2xhc3NpZnkgIC4uLi4KICAgICAgICAgICAgICByZXN0U3ltYm9sID0gdXJsLm1hdGNoKC86KC4qKSQvKVsxXTsKICAgICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgvOiguKikkLywgZGF0YVtyZXN0U3ltYm9sXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRhdGEgPSBtZXRob2QgPT09ICdnZXQnID8gewogICAgICAgICAgICAgIHBhcmFtczogZGF0YQogICAgICAgICAgICB9IDogZGF0YTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICByZXR1cm4gaW5zdGFuY2VbbWV0aG9kXSh1cmwsIGRhdGEsIHsKICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgaWYgKHNldFRva2VuKSB7CiAgICAgICAgICAgICAgdG9rZW4gPSByZXN1bHQudG9rZW47CiAgICAgICAgICAgICAgdWlkID0gcmVzdWx0LnVzZXJJZDsgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VpZCcsdWlkKQoKICAgICAgICAgICAgICBzdG9yZS5zZXQoJ3VpZCcsIHVpZCk7IC8v5pys5Zyw5a2Y5YKodG9rZW4KICAgICAgICAgICAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwcm9jZXNzLmVudi5WVUVfQVBQX1RPS0VOX05BTUUsIHRva2VuKQoKICAgICAgICAgICAgICBzdG9yZS5zZXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9UT0tFTl9OQU1FLCB0b2tlbik7CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2xvZ2luJyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3VsdCk7CgogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE5OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDQpOwoKICAgICAgICAgICAgaWYgKCFfY29udGV4dC50MC5yZXNwb25zZSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbWVzc2FnZSA9IF9jb250ZXh0LnQwLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKCiAgICAgICAgICAgIGlmIChub01lc3NhZ2UpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghX2lzTW9iaWxlKCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFRvYXN0KHsKICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICBfTm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICAgICAgICB0aXRsZTogJ+mUmeivrycsCiAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChfY29udGV4dC50MCkpOwoKICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSwgdGhpcywgW1s0LCAxOV1dKTsKICB9KSk7CiAgcmV0dXJuIF9IdHRwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"sources":["D:/桌面/页面练习/vue-blog/vue-blog/src/api/http.js"],"names":["instance","store","API_LIST","encrypt","Toast","_isMobile","Http","type","data","params","Error","url","method","rsaKey","setToken","noMessage","rest","toLowerCase","restSymbol","match","replace","result","token","uid","userId","set","process","env","VUE_APP_TOKEN_NAME","$store","dispatch","response","message","error","title","Promise","reject"],"mappings":"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","sourcesContent":["import instance from '@/api/common'\r\nimport store from \"store\"\r\nimport API_LIST from '@/config/api.config'\r\nimport encrypt from '@/util/encrypt'\r\n\r\nimport { Notification } from 'element-ui'\r\nimport { Toast } from 'vant'\r\nimport _isMobile from '@/util/isMobile'\r\nexport default async function Http ({ type, data, params }) {\r\n  if (!(type in API_LIST)) {\r\n    throw new Error('API请求错误')\r\n  }\r\n  let { url, method, rsaKey = false, setToken = false, noMessage = false, rest = false } = API_LIST[type]\r\n  try {\r\n    method = method.toLowerCase()\r\n    if (rsaKey && data[rsaKey]) {\r\n      data[rsaKey] = await encrypt(data[rsaKey])\r\n    }\r\n    if (rest) {\r\n      // :id , :classify  ....\r\n      let restSymbol = url.match(/:(.*)$/)[1]\r\n      url = url.replace(/:(.*)$/, data[restSymbol])\r\n    }\r\n    data = method === 'get' ? { params: data } : data\r\n    let result = await instance[method](url, data, { params })\r\n    if (setToken) {\r\n      let token = result.token;\r\n      let uid = result.userId\r\n      // localStorage.setItem('uid',uid)\r\n      store.set('uid', uid)\r\n      //本地存储token\r\n      // localStorage.setItem(process.env.VUE_APP_TOKEN_NAME, token)\r\n      store.set(process.env.VUE_APP_TOKEN_NAME, token)\r\n      this.$store.dispatch('login')\r\n    }\r\n    return result\r\n  } catch (error) {\r\n    if (error.response) {\r\n      let message = error.response.data.message\r\n      if (!noMessage) {\r\n        if(_isMobile()){\r\n          Toast({message:message})\r\n          return\r\n        }\r\n        Notification.error({\r\n          title: '错误',\r\n          message\r\n        })\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n}"]}]}