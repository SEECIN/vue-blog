{"remainingRequest":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\thread-loader\\dist\\cjs.js!D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\桌面\\页面练习\\vue-blog\\vue-blog\\src\\store\\modules\\likes.js","dependencies":[{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\src\\store\\modules\\likes.js","mtime":1632488894631},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\桌面\\页面练习\\vue-blog\\vue-blog\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1x1Njg0Q1x1OTc2Mi9cdTk4NzVcdTk3NjJcdTdFQzNcdTRFNjAvdnVlLWJsb2cvdnVlLWJsb2cvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0IHN0b3JlIGZyb20gJ3N0b3JlJzsKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwp2YXIgTElLRVNfTkFNRSA9IHByb2Nlc3MuZW52LlZVRV9BUFBfTElLRVNfTkFNRTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIGxpa2VzOiBzdG9yZS5nZXQoTElLRVNfTkFNRSkKICB9LAogIGdldHRlcnM6IHsKICAgIGhhZExpa2U6IGZ1bmN0aW9uIGhhZExpa2Uoc3RhdGUpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhaWQpIHsKICAgICAgICB2YXIgX3N0YXRlJGxpa2VzOwoKICAgICAgICByZXR1cm4gISEoKF9zdGF0ZSRsaWtlcyA9IHN0YXRlLmxpa2VzKSAhPT0gbnVsbCAmJiBfc3RhdGUkbGlrZXMgIT09IHZvaWQgMCAmJiBfc3RhdGUkbGlrZXMuaW5jbHVkZXMoYWlkKSk7CiAgICAgIH07CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIENIQU5HRV9MSUtFUzogZnVuY3Rpb24gQ0hBTkdFX0xJS0VTKHN0YXRlKSB7CiAgICAgIHN0YXRlLmxpa2VzID0gc3RvcmUuZ2V0KExJS0VTX05BTUUpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgcHVzaExpa2VzOiBmdW5jdGlvbiBwdXNoTGlrZXMoX3JlZiwgcGF5bG9hZCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIHZhciBhaWQgPSBwYXlsb2FkLmFpZDsKCiAgICAgIGlmIChhaWQpIHsKICAgICAgICB2YXIgbG9jYWxMaWtlcyA9IHN0b3JlLmdldChMSUtFU19OQU1FKSB8fCBbXTsKICAgICAgICB2YXIgaWR4ID0gbG9jYWxMaWtlcy5pbmRleE9mKGFpZCk7CgogICAgICAgIGlmIChpZHggPT09IC0xKSB7CiAgICAgICAgICBsb2NhbExpa2VzLnB1c2goYWlkKTsKICAgICAgICB9CgogICAgICAgIHN0b3JlLnNldChMSUtFU19OQU1FLCBsb2NhbExpa2VzKTsKICAgICAgICBjb21taXQoJ0NIQU5HRV9MSUtFUycpOwogICAgICB9CiAgICB9LAogICAgcHVsbExpa2VzOiBmdW5jdGlvbiBwdWxsTGlrZXMoX3JlZjIsIHBheWxvYWQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgdmFyIGFpZCA9IHBheWxvYWQuYWlkOwoKICAgICAgaWYgKGFpZCkgewogICAgICAgIHZhciBsb2NhbExpa2VzID0gc3RvcmUuZ2V0KExJS0VTX05BTUUpIHx8IFtdOwogICAgICAgIHZhciBpZHggPSBsb2NhbExpa2VzLmluZGV4T2YoYWlkKTsKCiAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHsKICAgICAgICAgIGxvY2FsTGlrZXMuc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgfQoKICAgICAgICBzdG9yZS5zZXQoTElLRVNfTkFNRSwgbG9jYWxMaWtlcyk7CiAgICAgICAgY29tbWl0KCdDSEFOR0VfTElLRVMnKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZUxpa2VzOiBmdW5jdGlvbiB1cGRhdGVMaWtlcyhfcmVmMywgX3JlZjQpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgc3RhdGUsIGFpZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlOwogICAgICAgICAgICAgICAgYWlkID0gX3JlZjQuYWlkOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3RhdGUpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gVnVlLnByb3RvdHlwZS4kYXBpKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2FydGljbGVMaWtlcycsCiAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICBpZDogYWlkCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBtb2R1bGVzOiB7fQp9Ow=="},{"version":3,"sources":["D:/桌面/页面练习/vue-blog/vue-blog/src/store/modules/likes.js"],"names":["store","Vue","LIKES_NAME","process","env","VUE_APP_LIKES_NAME","namespaced","state","likes","get","getters","hadLike","aid","includes","mutations","CHANGE_LIKES","actions","pushLikes","payload","commit","localLikes","idx","indexOf","push","set","pullLikes","splice","updateLikes","console","log","prototype","$api","type","data","id","modules"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,IAAMC,UAAU,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAA/B;AACA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAER,KAAK,CAACS,GAAN,CAAUP,UAAV;AADF,GAFM;AAKbQ,EAAAA,OAAO,EAAE;AACPC,IAAAA,OAAO,EAAE,iBAAAJ,KAAK;AAAA,aAAI,UAACK,GAAD,EAAS;AAAA;;AACzB,eAAO,CAAC,kBAAEL,KAAK,CAACC,KAAR,yCAAE,aAAaK,QAAb,CAAsBD,GAAtB,CAAF,CAAR;AACD,OAFa;AAAA;AADP,GALI;AAUbE,EAAAA,SAAS,EAAE;AACTC,IAAAA,YADS,wBACKR,KADL,EACY;AACnBA,MAAAA,KAAK,CAACC,KAAN,GAAcR,KAAK,CAACS,GAAN,CAAUP,UAAV,CAAd;AACD;AAHQ,GAVE;AAebc,EAAAA,OAAO,EAAE;AACPC,IAAAA,SADO,2BACgBC,OADhB,EACyB;AAAA,UAAnBC,MAAmB,QAAnBA,MAAmB;AAC9B,UAAMP,GAAN,GAAcM,OAAd,CAAMN,GAAN;;AACA,UAAIA,GAAJ,EAAS;AACP,YAAIQ,UAAU,GAAGpB,KAAK,CAACS,GAAN,CAAUP,UAAV,KAAyB,EAA1C;AACA,YAAImB,GAAG,GAAGD,UAAU,CAACE,OAAX,CAAmBV,GAAnB,CAAV;;AACA,YAAIS,GAAG,KAAK,CAAC,CAAb,EAAgB;AACdD,UAAAA,UAAU,CAACG,IAAX,CAAgBX,GAAhB;AACD;;AACDZ,QAAAA,KAAK,CAACwB,GAAN,CAAUtB,UAAV,EAAsBkB,UAAtB;AACAD,QAAAA,MAAM,CAAC,cAAD,CAAN;AACD;AACF,KAZM;AAaPM,IAAAA,SAbO,4BAagBP,OAbhB,EAayB;AAAA,UAAnBC,MAAmB,SAAnBA,MAAmB;AAC9B,UAAMP,GAAN,GAAcM,OAAd,CAAMN,GAAN;;AACA,UAAIA,GAAJ,EAAS;AACP,YAAIQ,UAAU,GAAGpB,KAAK,CAACS,GAAN,CAAUP,UAAV,KAAyB,EAA1C;AACA,YAAImB,GAAG,GAAGD,UAAU,CAACE,OAAX,CAAmBV,GAAnB,CAAV;;AACA,YAAIS,GAAG,KAAK,CAAC,CAAb,EAAgB;AACdD,UAAAA,UAAU,CAACM,MAAX,CAAkBL,GAAlB,EAAuB,CAAvB;AACD;;AACDrB,QAAAA,KAAK,CAACwB,GAAN,CAAUtB,UAAV,EAAsBkB,UAAtB;AACAD,QAAAA,MAAM,CAAC,cAAD,CAAN;AACD;AACF,KAxBM;AAyBDQ,IAAAA,WAzBC,qCAyBgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAlBpB,gBAAAA,KAAkB,SAAlBA,KAAkB;AAAPK,gBAAAA,GAAO,SAAPA,GAAO;AACrCgB,gBAAAA,OAAO,CAACC,GAAR,CAAYtB,KAAZ;AADqC;AAAA,uBAE/BN,GAAG,CAAC6B,SAAJ,CAAcC,IAAd,CAAmB;AAAEC,kBAAAA,IAAI,EAAE,cAAR;AAAwBC,kBAAAA,IAAI,EAAE;AAAEC,oBAAAA,EAAE,EAAEtB;AAAN;AAA9B,iBAAnB,CAF+B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGtC;AA5BM,GAfI;AA8CbuB,EAAAA,OAAO,EAAE;AA9CI,CAAf","sourcesContent":["import store from 'store'\r\nimport Vue from 'vue'\r\nconst LIKES_NAME = process.env.VUE_APP_LIKES_NAME\r\nexport default {\r\n  namespaced: true,\r\n  state: {\r\n    likes: store.get(LIKES_NAME)\r\n  },\r\n  getters: {\r\n    hadLike: state => (aid) => {\r\n      return !!(state.likes?.includes(aid))\r\n    }\r\n  },\r\n  mutations: {\r\n    CHANGE_LIKES (state) {\r\n      state.likes = store.get(LIKES_NAME)\r\n    }\r\n  },\r\n  actions: {\r\n    pushLikes ({ commit }, payload) {\r\n      let { aid } = payload\r\n      if (aid) {\r\n        let localLikes = store.get(LIKES_NAME) || []\r\n        let idx = localLikes.indexOf(aid)\r\n        if (idx === -1) {\r\n          localLikes.push(aid)\r\n        }\r\n        store.set(LIKES_NAME, localLikes)\r\n        commit('CHANGE_LIKES')\r\n      }\r\n    },\r\n    pullLikes ({ commit }, payload) {\r\n      let { aid } = payload\r\n      if (aid) {\r\n        let localLikes = store.get(LIKES_NAME) || []\r\n        let idx = localLikes.indexOf(aid)\r\n        if (idx !== -1) {\r\n          localLikes.splice(idx, 1)\r\n        }\r\n        store.set(LIKES_NAME, localLikes)\r\n        commit('CHANGE_LIKES')\r\n      }\r\n    },\r\n    async updateLikes ({ state }, { aid }) {\r\n      console.log(state);\r\n      await Vue.prototype.$api({ type: 'articleLikes', data: { id: aid } })\r\n    }\r\n\r\n  },\r\n  modules: {\r\n  }\r\n}"]}]}